#!/usr/bin/python
__author__ = 'b0xr00ter'
import pygeoip
import os
def install_db():
    print '[*] Please wait we install the database ...'
    os.system('echo Installing the stuff')
    os.system('echo installing almost ~12MB please wait for download')
    os.system('wget http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz')
    os.system('gunzip GeoLiteCity.dat.gz')
    os.system('sudo mkdir /opt/GeoIP')
    os.system('sudo mv GeoLiteCity.dat /opt/GeoIP/Geo.dat')
    print '[+] Sucessfully Installed the Database'

def ip2loc(ip):
    rawdata = pygeoip.GeoIP('/opt/GeoIP/Geo.dat')
    data = rawdata.record_by_name(ip)
    country = data['country_name']
    city = data['city']
    longi = data['longitude']
    lat = data['latitude']
    print '[+] '+str(city)+',' +str(country)
    print '[+] Latitude: '+str(lat)+ ', Longitude: '+ str(longi)

def main():
    print '''**************************************************************
             Welcome to IP to Location of Python Vulnerability Assesment
                                            by Shivam Mehta
            **************************************************************'''
    print '[*]This Module Offers : '
    print '1.) Install Location Databse (Required Once)'
    print '2.) Find Location of an IP Address'
    print '3.) Find my own public IP Address'
    ch =  input('[?] What do you wana do ? :')
    if ch == 1:
        install_db()
    elif ch == 2:
        ip = raw_input('[*] Enter the Ip Adress : ')
        ip2loc(ip)
    elif ch==3 :
        str(os.system('curl ipecho.net/plain \n') )
    else:
        print '[-] Error in Input O.o       o.O'

if __name__ == '__main__':
    main()


